@import '@{oui-path}/packages/oui-input/_variables';
@import '@{oui-path}/packages/oui-select/_variables';

@oui-icon-position-right: rem-calc(5);
@oui-icon-selector: oui-icon;

@oui-input-font-size: rem-calc(14);

@oui-select-font-size: rem-calc(14);
@oui-select-icon-size: rem-calc(10);
@oui-select-selector: oui-select;

label {
    &.required::after {
        content: "*";
        color: @state-danger-text;
        margin-left: 4px;
    }
}

legend {
    font-size: 1.4rem;
    font-weight: @oui-font-semibold;
    margin-bottom: .5em;
}

.form-control {
    box-shadow: none;
}

// Inputs, Textarea
input.form-control,
textarea.form-control {
    #oui > .input-normalize();
    #oui > .input-base();

    margin-bottom: 0;
    font-size: rem-calc(16);

    &:disabled,
    &.disabled { opacity: 1; }

    .has-success & {
        #oui > .input-variant(@state-success-text, @state-success-bg, @state-success-border);
    }

    .has-warning & {
        #oui > .input-variant(@state-warning-text, @state-warning-bg, @state-warning-border);
    }

    .has-error & {
        #oui > .input-variant(@state-danger-text, @state-danger-bg, @state-danger-border);
    }
}

// Select
select.form-control {
    #oui > .select-normalize();
    #oui > .select-background();

    line-height: rem-calc(34);
    height: ~"calc(@{oui-select-font-size} * 2.25)";
    min-height: rem-calc(36);
    padding: 0 rem-calc(20) 0 @oui-select-padding;
    font-size: rem-calc(16);
    font-weight: @oui-select-font-weight;
    color: @oui-select-font-color;
    border: 1px solid @oui-select-border-color;
    background-color: #fff;
    cursor: pointer;

    -webkit-appearance: none;
       -moz-appearance: none;
        -ms-appearance: none;
            appearance: none;

    &:focus,
    &:active {
        #oui > .select-background(@oui-input-border-color-focus);

        border: 1px solid @oui-input-border-color-focus;
        outline: none;
        box-shadow: inset 1px 1px 2px 0 fade(@oui-input-border-color-focus, 50%), 0 0 3px 0 rgba(0, 0, 0, 0.35);
        background-color: @oui-input-background-color-focus;
    }

    &:disabled {
        #oui > .select-background(@oui-input-font-color-disabled);

        border-color: @oui-input-background-color-disabled;
        background-color: @oui-color-concrete;
        color: @oui-input-font-color-disabled;
        text-shadow: none;
        cursor: not-allowed;
    }

    &[multiple] {
        height: auto;
        background-image: none;
    }

    &.disabled { opacity: 1; }

    .has-success & {
        #oui > .select-variant(@state-success-text, @state-success-bg, @state-success-border);
    }

    .has-warning & {
        #oui > .select-variant(@state-warning-text, @state-warning-bg, @state-warning-border);
    }

    .has-error & {
        #oui > .select-variant(@state-danger-text, @state-danger-bg, @state-danger-border);
    }
}

// Mixins
#oui {
    .input-variant(@status-font-color, @status-background-color, @status-border-color) {
        &:not(:disabled),
        &:not(:disabled):hover,
        &:not(:disabled):active,
        &:not(:disabled):focus {
            font-weight: 400;
            color: @status-font-color;
            border-color: @status-border-color;
            background-color: @status-background-color;
        }

        &:not(:disabled):focus { box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.35); }

        &::selection {
            color: #fff;
            background: @status-font-color;
        }

        &::-moz-selection {
            color: #fff;
            background: @status-font-color;
        }

        &::-webkit-selection {
            color: #fff;
            background: @status-font-color;
        }
    }

    .select-background(@color: @oui-icon-color) {
        @fill: escape(@color);

        background-image: url('data:image/svg+xml;utf8,<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve"><path fill="@{fill}" d="M32,51.2c-1.7,0-3.3-0.7-4.5-1.9L1.9,23.8c-2.5-2.5-2.5-6.6,0-9.1s6.6-2.5,9.1,0l21,21.1l21-21.1c2.5-2.5,6.6-2.5,9.1,0 c2.5,2.5,2.5,6.6,0,9.1L36.5,49.3C35.3,50.5,33.7,51.2,32,51.2z"/></svg>');
        background-repeat: no-repeat;
        background-position: right @oui-icon-position-right center;
        background-size: @oui-select-icon-size;
    }

    .select-variant(@status-font-color, @status-background-color, @status-border-color) {
        #oui > .select-background(@status-font-color);

        &:not(:disabled),
        &:not(:disabled):hover,
        &:not(:disabled):active,
        &:not(:disabled):focus {
            font-weight: 400;
            color: @status-font-color;
            border-color: @status-border-color;
            background-color: @status-background-color;
        }

        &:not(:disabled):focus { box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.35); }
    }
}

@media (min-width: @screen-sm-min) {
    .control-label {
        padding-top: 0.75rem !important;
    }
}
